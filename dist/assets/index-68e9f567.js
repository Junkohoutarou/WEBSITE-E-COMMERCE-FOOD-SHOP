import{e as d,j as e,R as m,d as f,a as j,ad as h,S as i,ae as C,a6 as E,$ as N,af as y,a0 as _}from"./index-95793c1e.js";import{I as u,a as g}from"./index.esm-fc22726e.js";import{G as T}from"./index.esm-672d0e9a.js";import{M as b}from"./index.esm-9e73d95f.js";const S=()=>{const{t:r}=d();return e.jsx("article",{className:"mt-4 p-4 border-b-1 border-solid border-gray-600",children:e.jsx("h2",{className:"font-semibold",children:r("HEADER_SECURE_CHECKOUT.TITLE")})})},w=()=>{const r=m(f),{t}=d(),{data:{province:s,district:l,ward:a}}=r;return e.jsxs("section",{className:"flex flex-col space-y-8",children:[e.jsxs("h2",{className:"inline-flex space-x-2",children:[e.jsx(u,{size:28,color:"orange"}),e.jsx("p",{className:"font-semibold",children:t("DELIVERY_SECURE_CHECKOUT.ADDRESS")})]}),e.jsxs("section",{className:"p-4 h-32 bg-orange-500 opacity-95 w-2/5 border-1 border-solid rounded-2xl flex flex-col justify-around ",children:[e.jsx(u,{size:28,color:"white"}),e.jsx("p",{className:"text-white font-normal",children:`${s}, ${l}, ${a}`})]})]})},A=r=>{const{qr:t}=r,{t:s}=d();return t?e.jsx("section",{className:"flex flex-col space-y-8",children:e.jsxs("h2",{className:"inline-flex space-y-4 flex-col",children:[e.jsx("p",{className:"font-semibold",children:s("DETAIL_SECURE_CHECKOUT.QR_CODE")}),e.jsx("div",{className:"w-64 aspect-square border-1 border-solid border-black rounded overflow-hidden",children:e.jsx("img",{className:"w-full aspect-square ",src:t.qrDataURL,alt:""})})]})}):null},R=r=>{const{qr:t}=r;return e.jsxs("section",{className:"flex flex-col col-span-2 space-y-8",children:[e.jsx(w,{}),e.jsx(A,{qr:t})]})},O=()=>{const r=j(h);return{handlePostCreateOrder:async({seller_id:s,cart_id:l,price:a,cart_items:x=[]})=>{const c=x.map(n=>({product_id:n.product.product_id,quantity:n.quantity}));console.log({seller_id:s,cart_id:l,price:a,products:c});try{r({status:i.LOADING,message:void 0});const n=await C.postCreateOrder({seller_id:s,cart_id:l,price:a,products:c});r({status:i.HAS_VALUE,message:n.data.message})}catch(n){console.error(n.response),r({status:i.HAS_ERROR,message:n})}}}},U={usePostCreateOrder:O},P=r=>{const{price:t,title:s,quantity:l}=r;return e.jsxs("section",{className:"flex flex-col space-y-2 ",children:[e.jsxs("h4",{className:"inline-flex font-light",children:["from ",e.jsx("p",{className:"text-orange-500 ml-2",children:" Lunch Box"})]}),e.jsxs("div",{className:"flex flex-row justify-between items-end",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h4",{className:"font-light",children:s}),e.jsxs("div",{className:"inline-flex",children:[e.jsx(T,{})," ",e.jsx("p",{className:"text-gray-400",children:t})]})]}),e.jsxs("div",{className:"inline-flex items-center bg-gray-50 w-24 justify-between",children:[e.jsx("button",{className:"px-4 bg-gray-50",children:" - "}),e.jsx("p",{children:l}),e.jsx("button",{className:"px-4 bg-gray-50",children:" + "})]})]})]})},D=r=>{const{cart_items:t}=r;return e.jsx("section",{className:"flex flex-col space-y-8",children:t.map(s=>e.jsx(P,{price:s.product.price,title:s.product.title,quantity:s.quantity},s.product.product_id))})},H=r=>{const{t}=d(),{price:s}=r;return e.jsxs("section",{className:"flex flex-col space-y-4 font-thin",children:[e.jsx("h4",{className:"font-light text-gray-400",children:t("PAYMENT_SECURE_CHECKOUT.BILL_DETAIL")}),e.jsxs("div",{className:"inline-flex flex-row  w-full justify-between text-gray-400",children:[e.jsx("p",{children:t("PAYMENT_SECURE_CHECKOUT.ITEM_TOTAL")}),e.jsxs("p",{children:["$",s]})]}),e.jsxs("div",{className:"inline-flex flex-row  w-full justify-between text-gray-400",children:[e.jsx("p",{children:t("PAYMENT_SECURE_CHECKOUT.DELIVERY_FEE")}),e.jsx("p",{children:"0"})]}),e.jsxs("div",{className:"inline-flex w-full flex-row justify-between text-gray-400",children:[e.jsx("p",{children:t("PAYMENT_SECURE_CHECKOUT.TAX")}),e.jsx("p",{children:"0"})]})]})},L=r=>{const{seller_id:t="",cart_id:s="",status:l="",price:a=0,cart_items:x=[]}=r,c=m(h),{handlePostCreateOrder:n}=U.usePostCreateOrder(),{t:o}=d();return e.jsx("section",{className:"px-8",children:e.jsxs("section",{className:"bg-gray-50 col-span-1 p-4 rounded-xl space-y-10",children:[e.jsxs("section",{className:"mt-4 inline-flex w-full flex-row justify-between items-center",children:[e.jsx("h2",{style:{fontWeight:400},children:o("PAYMENT_SECURE_CHECKOUT.CART")}),e.jsx("p",{children:o("PAYMENT_SECURE_CHECKOUT.ITEM")})]}),e.jsx(D,{cart_items:x}),e.jsx(H,{price:a}),e.jsxs("section",{className:"inline-flex w-full flex-row justify-between items-center",children:[e.jsx("h2",{className:"font-normal",children:o("PAYMENT_SECURE_CHECKOUT.TOTAL")}),e.jsxs("p",{className:"text-2xl",children:["$",a]})]}),l==="prepare"&&e.jsxs("button",{className:"w-full py-4 bg-gray-100 rounded-2xl border-1 border-solid border-black",onClick:p=>{p.preventDefault(),c.status!==i.HAS_VALUE&&n({cart_id:s,price:a,cart_items:x,seller_id:t})},children:[c.status===i.LOADING&&e.jsx(g,{className:"animate-spin",size:24}),c.status===i.HAS_VALUE&&e.jsx(b,{size:24}),c.status===i.IDLE&&e.jsx("p",{className:"text-xl font-bold text-black",children:o("PAYMENT_SECURE_CHECKOUT.PREPARE")})]}),l==="processing"&&e.jsx("div",{className:"w-full py-4 bg-orange-400 rounded-2xl flex justify-center items-center",children:e.jsx("p",{className:"text-xl font-bold text-white",children:o("PAYMENT_SECURE_CHECKOUT.PROCESSING")})}),l==="deny"&&e.jsx("div",{className:"w-full py-4 bg-red-700 rounded-2xl flex justify-center items-center",children:e.jsx("p",{className:"text-xl font-bold text-white",children:o("PAYMENT_SECURE_CHECKOUT.DENY")})}),l==="ordered"&&e.jsx("div",{className:"w-full py-4 bg-green-400 rounded-2xl flex justify-center items-center",children:e.jsx("p",{className:"text-xl font-bold text-white",children:o("PAYMENT_SECURE_CHECKOUT.ORDERED")})})]})})},I=()=>{const{cartId:r}=E(),{state:t,contents:s}=N(y(r));return console.log(t),console.log(s),e.jsxs("article",{className:"grid grid-cols-3 gap-x-12",children:[t==="loading"&&e.jsx("div",{className:"w-full flex justify-center items-center col-span-3",children:e.jsx(_,{color:"#FFA33C",height:100,width:100})}),t==="hasValue"&&e.jsxs(e.Fragment,{children:[e.jsx(R,{qr:s.data[0].seller.qr}),e.jsx(L,{price:s.data[0].cart.price,cart_id:s.data[0].cart.cart_id,cart_items:s.data[0].cart.cart_items,status:s.data[0].cart.status,seller_id:s.data[0].seller.seller_id})]})]})},Y=()=>e.jsxs("main",{className:"container mx-auto mt-28 space-y-12",children:[e.jsx(S,{}),e.jsx(I,{})]});export{Y as default};
