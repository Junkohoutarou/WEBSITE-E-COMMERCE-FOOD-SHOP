import{a as m,a3 as x,R as u,a4 as g,a5 as N,S as i,p as b,j as e,e as j,a6 as A,$ as P,a7 as E,c as y,a8 as w,a9 as T,m as D,L as I,a0 as O,aa as S,ab as R,I as L}from"./index-95793c1e.js";import{G as f}from"./index.esm-672d0e9a.js";import{a as _}from"./index.esm-6ddade7c.js";import{c as v}from"./cartApi-d0126b0e.js";import{a as F}from"./index.esm-ae5a22dd.js";import{G as V}from"./index.esm-225f4ddf.js";const W=()=>{const s=m(x),{data:{cart_items:r,price:t}}=u(x);return{handleCreateCartProduct:async()=>{try{s(n=>({...n,status:i.LOADING}));const a={price:t,cart_items:r.map(n=>({product_id:n.product_id,quantity:n.quantity}))},c=await v.createCart(a);s({status:i.HAS_VALUE,message:c.data.message,data:{price:void 0,cart_items:[]}})}catch(a){console.log(a.data),s(c=>({...c,status:i.HAS_ERROR,message:a.data.message}))}}}},M=()=>{const s=m(g),{data:r}=u(N);return{handleFindProductByCategory:async l=>{try{s(c=>({...c,status:i.LOADING})),console.log(l);const a=await b.postFindProductByCategory({categories_id:l,author_id:r.author.author_id});console.log(a.data),s({status:i.HAS_VALUE,message:a.data.message,data:a.data.data})}catch(a){console.log(a),s({status:i.HAS_ERROR,message:a.data,data:[]})}}}},q=()=>{const s=m(x);return{handleAddDetailProductToCart:({product_id:t,title:l,priceProduct:a})=>{s(c=>{let n;if(!c.data.price)return{...c,data:{price:a,cart_items:[{product_id:t,title:l,price:a,quantity:1}]}};const d=c.data.price+a;return c.data.cart_items.find(h=>h.product_id===t)?n=c.data.cart_items.map(C=>C.product_id===t?{...C,quantity:C.quantity+1}:C):n=[...c.data.cart_items,{product_id:t,title:l,price:a,quantity:1}],{...c,data:{...c.data,price:d,cart_items:n}}})}}},H=()=>{const s=m(x);return{handleSubDetailProductToCart:({product_id:t,priceProduct:l})=>{s(a=>{const c=a.data.price-l,d=a.data.cart_items.map(o=>{if(!(o.product_id===t&&o.quantity===1))return o.product_id===t?{...o,quantity:o.quantity-1}:o});return{...a,data:{...a.data,price:c,cart_items:d.filter(o=>o!==void 0)}}})}}},p={useCreateCartProduct:W,useFindProductByCategory:M,useAddDetailProductToCart:q,useSubDetailProductToCart:H},G=()=>{var c,n,d,o,h;const{t:s}=j(),{id:r}=A(),{state:t,contents:l}=P(E(r)),a=m(N);return y.useEffect(()=>{a({status:i.HAS_VALUE,message:l.message,data:l.data})},[t]),e.jsxs("section",{className:`flex pl-4 flex-row space-x-8 h-full w-3/5 justify-between ${t===i.LOADING&&"animate-pulse"}`,children:[e.jsx("div",{className:"w-2/5 flex justify-center items-center h-full rounded-xl",children:e.jsx("img",{className:"w-full h-full object-cover rounded-xl text-white",src:t===i.LOADING?"":((c=l.data)==null?void 0:c.picture)||"asdads",alt:"Something wrong with url"})}),e.jsxs("section",{className:"w-3/5 text-white flex flex-col space-y-8 justify-end py-8",children:[e.jsx("h2",{children:((n=l.data)==null?void 0:n.title)||""}),e.jsx("p",{children:((o=(d=l.data)==null?void 0:d.author)==null?void 0:o.username)||""}),e.jsxs("div",{className:"grid grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col justify-between justify-center",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx(w,{})," 4.5 ",s("DETAIL_POST_VIEW.RATING")]}),e.jsxs("p",{className:"text-sm",children:["100+ ",s("DETAIL_POST_VIEW.RATING")]})]}),e.jsxs("div",{className:"flex flex-col border-x-2 border-solid border-white text-center px-6",children:[e.jsxs("p",{className:"text-sm",children:["30 ",s("DETAIL_POST_VIEW.MIN")]}),e.jsx("p",{className:"text-sm",children:s("DETAIL_POST_VIEW.DELIVERY_TIME")})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx(f,{})," ",((h=l.data)==null?void 0:h.price)||""]}),e.jsx("p",{className:"text-sm",children:s("DETAIL_POST_VIEW.COST_FOR_TWO")})]})]})]})]})},B=()=>{const{t:s}=j();return e.jsx("section",{className:"text-white w-2/5 pt-12 pl-12",children:e.jsxs("div",{className:"border-dashed border-2 border-orange-400 h-full rounded-2xl px-8 flex flex-col justify-center space-y-4",children:[e.jsx("h2",{children:s("DETAIL_POST_VIEW.OFFERS")}),e.jsxs("ul",{className:"flex flex-col space-y-4",children:[e.jsxs("li",{className:"inline-flex items-center space-x-2",children:[e.jsx(_,{size:24,color:"orange"}),e.jsx("p",{children:s("DETAIL_POST_VIEW.50_OFF")}),e.jsx(f,{}),"100 | ",s("DETAIL_POST_VIEW.USE_CODE_TRYNEW")]}),e.jsxs("li",{className:"inline-flex items-center space-x-2",children:[e.jsx(_,{size:24,color:"orange"}),e.jsxs("p",{children:[s("DETAIL_POST_VIEW.20_OFF")," | ",s("DETAIL_POST_VIEW.USE_CODE_PARTY")]})]})]})]})})},k=()=>e.jsx("article",{className:"bg-black h-64 opacity-90",children:e.jsxs("section",{className:"container flex flex-row mx-auto py-4 h-full",children:[e.jsx(G,{}),e.jsx(B,{})]})}),U=s=>{const{open:r=!1}=s,t=y.useRef(null),{status:l,message:a}=u(x),c=m(T);return y.useLayoutEffect(()=>{var n,d;r&&!((n=t.current)!=null&&n.open)?t.current.showModal():!r&&((d=t.current)!=null&&d.open)&&t.current.close()},[r]),e.jsx("dialog",{ref:t,className:"absolute bg-white overflow-hidden rounded-2xl ",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.jsxs("article",{className:"w-116 h-64 flex flex-col justify-between items-center p-4",children:[e.jsxs("section",{className:"grow w-full flex justify-center items-center",children:[l===i.LOADING&&e.jsx(F,{size:60,className:"animate-spin",color:"orange"}),l===i.HAS_VALUE&&e.jsx(V,{size:60,color:"#557C55"}),l===i.HAS_ERROR&&e.jsx("p",{style:{color:"red"},children:a})]}),e.jsx("section",{className:"px-4 py-2 flex justify-center items-center w-full",children:e.jsx("button",{onClick:()=>c(!1),className:"bg-orange-400 w-full py-2",children:"OK"})})]})})},z=()=>{const{t:s}=j(),{data:{price:r}}=u(x);return e.jsx("section",{children:e.jsxs("div",{className:"flex flex-row justify-between ",children:[e.jsx("h4",{className:"text-2xl font-medium",children:s("CART_POST_VIEW.SUB_TOTAL")}),e.jsxs("h4",{className:"inline-flex text-2xl items-center font-medium",children:[e.jsx(f,{}),r]})]})})},Y=s=>{const{product_id:r,title:t,price:l,quantity:a}=s,{handleAddDetailProductToCart:c}=p.useAddDetailProductToCart(),{handleSubDetailProductToCart:n}=p.useSubDetailProductToCart();return e.jsx("section",{className:"flex flex-col space-y-4 hover-box border-b-1 border-solid border-gray-400 pb-6 px-4 rounded",children:e.jsxs("div",{className:"flex flex-row justify-between ",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h4",{className:"font-medium",children:t}),e.jsxs("div",{className:"inline-flex",children:[e.jsx(f,{})," ",e.jsx("p",{className:"text-gray-400",children:l})]})]}),e.jsxs("div",{className:"inline-flex items-end w-24 justify-between",children:[e.jsx("button",{onClick:()=>{n({product_id:r,priceProduct:l})},className:"px-4 ",children:e.jsx("p",{children:"-"})}),e.jsx("p",{children:a}),e.jsx("button",{onClick:()=>{c({product_id:r,title:t,priceProduct:l})},className:"px-4 ",children:e.jsx("p",{children:"+"})})]})]})})},$=()=>{var r;const{data:{cart_items:s}}=u(x);return e.jsx("section",{className:"flex flex-col space-y-6",children:!!((r=s[0])!=null&&r.title)&&s.map(t=>e.jsx(Y,{title:t.title,product_id:t.product_id,quantity:t.quantity,price:t.price},t.product_id))})},K=()=>{const{t:s}=j(),[r,t]=D(T),{handleCreateCartProduct:l}=p.useCreateCartProduct(),a=I(x);return e.jsxs(e.Fragment,{children:[e.jsx(U,{open:r}),e.jsxs("article",{className:"flex flex-col space-y-10 ",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("h2",{className:"text-2xl",children:s("CART_POST_VIEW.CART")}),e.jsxs("p",{children:["2 ",s("CART_POST_VIEW.ITEM")]})]}),e.jsx($,{}),e.jsx(z,{}),e.jsx("button",{className:"px-8 py-4 bg-orange-500 text-xl font-bold text-white rounded-xl hover-box",onClick:c=>{c.preventDefault(),t(!0),l(),a()},children:s("CART_POST_VIEW.CHECKOUT")})]})]})},J=s=>{const{product_id:r,title:t,picture:l,description:a,price:c}=s,{handleAddDetailProductToCart:n}=p.useAddDetailProductToCart(),{t:d}=j();return e.jsxs("article",{className:"flex flex-row space-x-6 justify-between items-center w-full h-full p-4 shadow border-1 border-solid border-gray-200 rounded-xl",children:[e.jsxs("section",{className:"flex flex-col space-y-2 h-full justify-center ",children:[e.jsx("h2",{className:"font-light",children:t}),e.jsxs("p",{className:"inline-flex",children:[e.jsx(f,{}),c]}),e.jsx("p",{className:"text-gray-400 text-base",children:a})]}),e.jsxs("section",{className:" relative w-40 ",children:[e.jsx("img",{className:"h-32 w-32 aspect-square rounded-2xl border-1 border-solid border-gray-100",src:l||"",alt:"",loading:"Loading..."}),e.jsx("button",{style:{top:"100px",left:18},className:"absolute px-6 py-3 shadow-md rounded-xl bg-white",onClick:o=>{o.preventDefault(),n({product_id:r,title:t,priceProduct:c})},children:e.jsx("p",{className:"text-lg ",style:{color:"green"},children:d("CONTENT_POST_VIEW.ADD")})})]})]})},Q=()=>{const{data:s,status:r}=u(g);return console.log(r),e.jsx("article",{children:r==="loading"?e.jsx("div",{className:"w-full flex justify-center items-center py-4 ",children:e.jsx(O,{color:"#FFA33C",height:50,width:50})}):e.jsx("div",{className:"flex-col flex space-y-4",children:s.map(t=>e.jsx(J,{product_id:t.product_id,title:t.title,price:t.price,picture:t.picture,description:t.description},t.product_id))})})},X=s=>{const{name:r,id:t}=s,{handleFindProductByCategory:l}=p.useFindProductByCategory(),[a,c]=D(R);return e.jsx("p",{onClick:n=>{n.preventDefault(),l(t),c(t)},className:"text-gray-500 sidebar-item hover-cursor",style:{color:`${a===t?"orange":"rgb(107, 114, 128)"}`},children:r})},Z=()=>{const{state:s,contents:{data:r}}=P(S);return e.jsx("aside",{className:"flex flex-col items-end pt-4 pr-12 space-y-2 text-base",children:s==="loading"?e.jsx(e.Fragment,{children:e.jsx("p",{children:"Loading..."})}):e.jsx(e.Fragment,{children:r.map(t=>e.jsx(X,{id:t.id,name:t.name},t.id))})})},ee=()=>e.jsx("article",{className:"container mx-auto py-16",children:e.jsxs("div",{className:"grid grid-cols-6 gap-x-12",children:[e.jsx("section",{className:"col-span-1 border-r-1 h-full border-solid border-gray-300",children:e.jsx(Z,{})}),e.jsx("section",{className:"col-span-3 h-92",children:e.jsx(Q,{})}),e.jsx("section",{className:"col-span-2 px-8 shadow pt-4 pb-8 rounded-xl",children:e.jsx(K,{})})]})}),ne=()=>{const{status:s,data:r}=u(x);return console.log(r),console.log(s),e.jsxs("main",{style:{height:"1280px"},className:"mt-28 flex flex-col",children:[e.jsxs(L,{children:[e.jsx("meta",{charSet:"urf-8"}),e.jsx("title",{children:"IE104 FRONT END | DETAIL POST"})]}),e.jsx(k,{}),e.jsx(ee,{})]})};export{ne as default};
