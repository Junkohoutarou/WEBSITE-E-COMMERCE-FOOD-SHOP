import{K as p,f as c,a as l,c as E,R as i,d as u,L as j,M as N,T as R,Q as P,U as f,j as e,e as S,V as A,_ as C,W as B,o as O,I as V,N as T}from"./index-95793c1e.js";import{u as F}from"./userApi-7a2cb567.js";const m={CHANGE_PROFILE:"CHANGE_PROFILE",DETAIL_PROFILE:"MY_PROFILE"},_=p({key:"statusBuyerViewAtom",default:m.DETAIL_PROFILE}),g=p({key:"buyerFormStateAtom",default:{username:null,address:{province:null,district:null,ward:null}}}),U=p({key:"postUpdateBuyerAtom",default:{state:c,message:null}}),b=()=>{const t=l(_);return{handleChangeStatusContentBuyerView:E.useCallback(o=>{t(o),console.log(o)},[t])}},v=()=>{const t=l(U),{data:{username:n,province:o,district:r,ward:d}}=i(u),a=i(g),L=l(u),w=j(g),{handlePushNotificationItem:y}=N.usePushNotificationItem();return{handlePostUpdateBuyer:async()=>{try{t({state:c.LOADING,message:null});const s={username:a.username||n,address:{province:a.address.province||o,district:a.address.district||r,ward:a.address.ward||d}},{data:{message:x}}=await F.postUpdateUser(s);t({state:c.HAS_VALUE,message:x}),y(R.SUCCESS,x);const I=await P();f(JSON.stringify({...I,username:s.username,province:s.address.province,district:s.address.district,ward:s.address.ward})),L(h=>({...h,data:{...h.data,username:s.username,province:s.address.province,district:s.address.district,ward:s.address.ward}})),w()}catch(s){console.log(s.data),t({state:c.HAS_ERROR,message:"SomeThing WRONG when update"}),y(R.ERROR,"Something wrong when update")}}}},D={useChangeStatusContentBuyerView:b,usePostUpdateBuyer:v},H=[{title:"MANAGE_MY_ACCOUNT",items:["MY_PROFILE","CHANGE_PROFILE"]}],M=t=>{const{t:n}=S(),{items:o=[]}=t,{handleChangeStatusContentBuyerView:r}=D.useChangeStatusContentBuyerView(),d=i(_);return e.jsx("ul",{className:"px-8 space-y-2",children:o.map(a=>e.jsx("p",{className:`${d===a?"text-orange-400":"text-gray-400"} cursor-pointer  sidebar--item`,onClick:()=>r(a),children:n(`SELLER_VIEW.SIDEBAR.${a}`)},a))})},k=t=>{const{t:n}=S(),{items:o=[]}=t;return e.jsx(e.Fragment,{children:o.map(r=>e.jsxs("section",{className:"flex flex-col space-y-4 mb-6",children:[e.jsx("p",{className:"text-black text-xl",children:n(`BUYER_VIEW.SIDEBAR.${r.title}`)}),e.jsx(M,{items:r.items},r.title)]},r.title))})},G=()=>e.jsx("section",{className:"w-full col-span-2 pl-4 pr-12",children:e.jsx("article",{className:"border-r-1 border-solid border-gray-300 py-4 h-full",children:e.jsx(k,{items:H})})}),Y=A(E.lazy(()=>C(()=>import("./DetailProfileManageAccountComponent-a9a7e0d8.js"),["assets/DetailProfileManageAccountComponent-a9a7e0d8.js","assets/index-95793c1e.js","assets/index-c825e5a9.css"])),e.jsx(B,{})),W=A(E.lazy(()=>C(()=>import("./ChangeProfileManageAccountComponent-f485b595.js"),["assets/ChangeProfileManageAccountComponent-f485b595.js","assets/index-95793c1e.js","assets/index-c825e5a9.css","assets/index.esm-9e73d95f.js","assets/userApi-7a2cb567.js"])),e.jsx(B,{})),$={[m.DETAIL_PROFILE]:()=>e.jsx(Y,{}),[m.CHANGE_PROFILE]:()=>e.jsx(W,{})},z=()=>{const t=i(_);return e.jsx("article",{className:"w-full col-span-5",children:$[t]()})},J=()=>{const{data:{isLoggedIn:t,role:n}}=i(u);return e.jsx(e.Fragment,{children:t&&n===O.BUYER?e.jsxs("main",{className:"container mx-auto mt-32 grid grid-cols-7 justify-items-center",children:[e.jsxs(V,{children:[e.jsx("meta",{charSet:"urf-8"}),e.jsx("title",{children:"IE104 FRONT END | PROFILE"})]}),e.jsx(G,{}),e.jsx(z,{})]}):e.jsx(T,{to:"/"})})},X=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{D as B,X as i,g as u};
